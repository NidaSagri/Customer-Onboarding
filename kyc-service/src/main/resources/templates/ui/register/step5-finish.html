<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>OFSS Bank Registration - Final Step</title>
    <link rel="stylesheet" th:href="@{/css/style.css}">
    <style>
        .review-section { background: #f8f9fa; border: 1px solid #e9ecef; border-radius: 8px; padding: 1.5rem; margin-bottom: 1.5rem; }
        .review-section h4 { text-align: left; border-bottom: 1px solid #ddd; padding-bottom: 0.5rem; margin-bottom: 1rem; }
        .review-item { display: flex; justify-content: space-between; padding: 0.25rem 0; }
    </style>
</head>
<body>
    <div class="container">
        <div class="logo-container"><img th:src="@{https://img.etimg.com/thumb/width-1200,height-900,imgsize-8519,resizemode-75,msid-114568605/markets/stocks/news/oracle-financial-services-shares-in-focus-after-q2-profit-jumps-38-yoy-to-rs-578-crore.jpg}" alt="OFSS Bank Logo"/></div>
        <h1>New Account Registration</h1>
        
        <!-- Progress Bar -->
        <div class="progress-bar-container">
            <ul class="progress-bar">
                <li class="progress-step active"><div class="progress-step-circle">1</div><div class="progress-step-label">Personal</div></li>
                <li class="progress-step active"><div class="progress-step-circle">2</div><div class="progress-step-label">Nominee</div></li>
                <li class="progress-step active"><div class="progress-step-circle">3</div><div class="progress-step-label">Services</div></li>
                <li class="progress-step active"><div class="progress-step-circle">4</div><div class="progress-step-label">Documents</div></li>
                <li class="progress-step active"><div class="progress-step-circle">5</div><div class="progress-step-label">Finish</div></li>
            </ul>
        </div>
        
        <h2>Step 5: Review, Upload, and Finish</h2>
        
        <!-- THE FORM THAT SUBMITS EVERYTHING -->
        <form th:action="@{/ui/register/submit}" th:object="${registrationRequest}" method="post" enctype="multipart/form-data">
            
            <!-- Review Section -->
            <div class="review-section">
                <h4>Please review your details before submitting.</h4>
                <div class="review-item"><strong>Name:</strong> <span th:text="*{fullname}"></span></div>
                <div class="review-item"><strong>Email:</strong> <span th:text="*{email}"></span></div>
                <div class="review-item"><strong>PAN:</strong> <span th:text="*{pan}"></span></div>
                <div class="review-item"><strong>Account Type:</strong> <span th:text="*{requestedAccountType}"></span></div>
                <div th:if="*{nominee != null}" class="review-item"><strong>Nominee:</strong> <span th:text="*{nominee.name}"></span></div>
                <div th:unless="*{nominee != null}" class="review-item"><strong>Nominee:</strong> <span>Not provided</span></div>
            </div>

            <div class="form-grid">
                <!-- Document Uploads -->
                <div class="form-group">
                    <label for="passportPhoto">Passport Photo (Image only):</label>
                    <input type="file" id="passportPhoto" name="passportPhoto" accept="image/png, image/jpeg" required>
                </div>
                <div class="form-group">
                    <label for="panDoc">PAN Card (Image or PDF):</label>
                    <input type="file" id="panDoc" name="panDoc" accept="image/png, image/jpeg, application/pdf" required>
                </div>
                <div class="form-group">
                    <label for="aadhaarDoc">Aadhaar Card (Image or PDF):</label>
                    <input type="file" id="aadhaarDoc" name="aadhaarDoc" accept="image/png, image/jpeg, application/pdf" required>
                </div>

                <!-- Credentials -->
                <div class="form-group"><label for="username">Create a Username:</label><input type="text" id="username" th:field="*{username}" required /><div th:if="${#fields.hasErrors('username')}" th:errors="*{username}" class="error-message"></div></div>
                <div class="form-group"><label for="password">Create a Password:</label><input type="password" id="password" th:field="*{password}" required /><div th:if="${#fields.hasErrors('password')}" th:errors="*{password}" class="error-message"></div></div>
                
                <div class="btn-container">
                    <a th:href="@{/ui/register/documents}" class="btn btn-secondary">&larr; Back</a>
                    <button type="submit" class="btn">Submit Application</button>
                </div>
            </div>
        </form>
    </div>
</body>
</html>